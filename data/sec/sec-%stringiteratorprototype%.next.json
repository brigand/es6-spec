{"id":"sec-%stringiteratorprototype%.next","html":"\n          <h1><span class=\"secnum\" id=\"sec-21.1.5.2.1\"><a href=\"/sec/sec-%stringiteratorprototype%.next.html\" title=\"link to this section\">21.1.5.2.1</a></span> %StringIteratorPrototype%.next ( )</h1>\n          <ol class=\"proc\">\n            <li>Let <i>O</i> be the <b>this</b> value.</li>\n            <li>If <a href=\"/sec/sec-ecmascript-data-types-and-values.html\">Type</a>(<i>O</i>) is not Object, throw a <b>TypeError</b>\n                exception.</li>\n            <li>If <i>O</i> does not have all of the internal slots of an String Iterator Instance (<a href=\"/sec/sec-properties-of-string-iterator-instances.html\">21.1.5.3</a>), throw a <b>TypeError</b> exception.</li>\n            <li>Let <i>s</i> be the value of the [[IteratedString]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a> of <i>O</i>.</li>\n            <li>If <i>s</i> is <b>undefined</b>, return <a href=\"/sec/sec-createiterresultobject.html\">CreateIterResultObject</a>(<b>undefined</b>, <b>true</b>).</li>\n            <li>Let <i>position</i> be the value of the [[StringIteratorNextIndex]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a> of <i>O</i>.</li>\n            <li>Let <i>len</i> be the number of elements in <i>s</i>.</li>\n            <li>If <i>position</i> &#x2265; <i>len</i>, then\n              <ol class=\"block\">\n                <li>Set the value of the [[IteratedString]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal\n                    slot</a> of <i>O</i> to <b>undefined</b>.</li>\n                <li>Return <a href=\"/sec/sec-createiterresultobject.html\">CreateIterResultObject</a>(<b>undefined</b>, <b>true</b>).</li>\n              </ol>\n            </li>\n            <li>Let <i>first</i> be the code unit value at index <i>position</i> in <i>s</i>.</li>\n            <li>If <i>first</i> &lt; 0xD800 or <i>first</i> &gt; 0xDBFF or <i>position</i>+1 = <i>len</i>, let <i>resultString</i>\n                be the string consisting of the single code unit <i>first</i>.</li>\n            <li>Else,\n              <ol class=\"block\">\n                <li>Let <i>second</i> be the code unit value at index <i>position</i>+1 in the String <i>S</i>.</li>\n                <li>If <i>second</i> &lt; 0xDC00 or <i>second</i> &gt; 0xDFFF, let <i>resultString</i> be the string consisting of\n                    the single code unit <i>first</i>.</li>\n                <li>Else, let <i>resultString</i> be the string consisting of the code unit <i>first</i> followed by the code unit\n                    <i>second</i>.</li>\n              </ol>\n            </li>\n            <li>Let <i>resultSize</i> be the number of code units in <i>resultString</i>.</li>\n            <li>Set the value of the [[StringIteratorNextIndex]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a> of <i>O</i> to <i>position</i>+\n                <i>resultSize</i>.</li>\n            <li>Return <a href=\"/sec/sec-createiterresultobject.html\">CreateIterResultObject</a>(<i>resultString</i>, <b>false</b>).</li>\n          </ol>\n        "}