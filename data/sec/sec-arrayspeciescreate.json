{"id":"sec-arrayspeciescreate","html":"\n        <h1><span class=\"secnum\" id=\"sec-9.4.2.3\"><a href=\"/sec/sec-arrayspeciescreate.html\" title=\"link to this section\">9.4.2.3</a></span> ArraySpeciesCreate(originalArray, length)</h1>\n\n        <p class=\"normalbefore\">The abstract operation ArraySpeciesCreate with arguments <var>originalArray</var> and\n        <var>length</var> is used to specify the creation of a new Array object using a constructor function that is derived from\n        <var>originalArray</var>. It performs the following steps:</p>\n\n        <ol class=\"proc\">\n          <li><a href=\"/sec/sec-algorithm-conventions.html\">Assert</a>: <i>length</i> is an integer Number &#x2265; 0.</li>\n          <li>If <i>length</i> is &#x2212;0, let <i>length</i> be +0.</li>\n          <li>Let <i>C</i> be <b>undefined</b>.</li>\n          <li>Let <i>isArray</i> be <a href=\"/sec/sec-isarray.html\">IsArray</a>(<i>originalArray</i>).</li>\n          <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>isArray</i>).</li>\n          <li>If <i>isArray</i> is <b>true</b>, then\n            <ol class=\"block\">\n              <li>Let <i>C</i> be <a href=\"/sec/sec-get-o-p.html\">Get</a>(<i>originalArray</i>, <code>&quot;constructor&quot;</code>).</li>\n              <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>C</i>).</li>\n              <li>If <a href=\"/sec/sec-isconstructor.html\">IsConstructor</a>(<i>C</i>) is <b>true</b>, then\n                <ol class=\"block\">\n                  <li>Let <i>thisRealm</i> be <a href=\"/sec/sec-execution-contexts.html\">the running execution context</a>&#x2019;s <a href=\"/sec/sec-code-realms.html\">Realm</a>.</li>\n                  <li>Let <i>realmC</i> be <a href=\"/sec/sec-getfunctionrealm.html\">GetFunctionRealm</a>(<i>C</i>).</li>\n                  <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>realmC</i>).</li>\n                  <li>If <i>thisRealm</i> and <i>realmC</i> are not the same <a href=\"/sec/sec-code-realms.html\">Realm</a> Record, then\n                    <ol class=\"block\">\n                      <li>If <a href=\"/sec/sec-samevalue.html\">SameValue</a>(<i>C</i>, <i>realmC</i>.[[intrinsics]].[[%Array%]]) is\n                          <b>true</b>, let <i>C</i> be <b>undefined</b>.</li>\n                    </ol>\n                  </li>\n                </ol>\n              </li>\n              <li>If <a href=\"/sec/sec-ecmascript-data-types-and-values.html\">Type</a>(<i>C</i>) is Object, then\n                <ol class=\"block\">\n                  <li>Let <i>C</i> be <a href=\"/sec/sec-get-o-p.html\">Get</a>(<i>C</i>, @@species).</li>\n                  <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>C</i>).</li>\n                  <li>If <i>C</i> is <b>null</b>, let <i>C</i> be <b>undefined</b>.</li>\n                </ol>\n              </li>\n            </ol>\n          </li>\n          <li>If <i>C</i> is <b>undefined</b>, return <a href=\"/sec/sec-arraycreate.html\">ArrayCreate</a>(<i>length</i>).</li>\n          <li>If <a href=\"/sec/sec-isconstructor.html\">IsConstructor</a>(<i>C</i>) is <b>false</b>, throw a <b>TypeError</b>\n              exception<i>.</i></li>\n          <li>Return <a href=\"/sec/sec-construct.html\">Construct</a>(<i>C</i>, &#xAB;<i>length</i>&#xBB;).</li>\n        </ol>\n\n        <div class=\"note\">\n          <p><span class=\"nh\">NOTE</span> If <var>originalArray</var> was created using the standard built-in Array constructor\n          for a <a href=\"/sec/sec-code-realms.html\">Realm</a> that is not the <a href=\"/sec/sec-code-realms.html\">Realm</a>  of <a href=\"/sec/sec-execution-contexts.html\">the running execution context</a>, then a new Array is created using the <a href=\"/sec/sec-code-realms.html\">Realm</a> of <a href=\"/sec/sec-execution-contexts.html\">the running execution context</a>. This maintains\n          compatibility with Web browsers that have historically had that behaviour for the Array.prototype methods that now are\n          defined using  ArraySpeciesCreate.</p>\n        </div>\n      "}