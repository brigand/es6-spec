{"id":"sec-newpromisecapability","html":"\n        <div class=\"front\">\n          <h1><span class=\"secnum\" id=\"sec-25.4.1.5\"><a href=\"/sec/sec-newpromisecapability.html\" title=\"link to this section\">25.4.1.5</a></span> NewPromiseCapability ( C )</h1>\n\n          <p class=\"normalbefore\">The abstract operation NewPromiseCapability takes a constructor function, and attempts to use\n          that constructor function in the fashion of the built-in <code>Promise</code> constructor to create a Promise object and\n          extract its resolve and reject functions. The promise plus the resolve and reject functions are used to initialize a new\n          PromiseCapability record which is returned as the value of this abstract operation.</p>\n\n          <ol class=\"proc\">\n            <li>If <a href=\"/sec/sec-isconstructor.html\">IsConstructor</a>(<i>C</i>) is <b>false</b>, throw a <b>TypeError</b>\n                exception.</li>\n            <li>NOTE <span style=\"font-family: Times New Roman\"><i>C</i></span> is assumed to be a constructor function that\n                supports the parameter conventions of the <code>Promise</code> constructor (<a href=\"/sec/sec-promise-executor.html\">see\n                25.4.3.1</a>).</li>\n            <li>Let <i>promiseCapability</i> be a new PromiseCapability { [[Promise]]: <b>undefined</b>, [[Resolve]]:\n                <b>undefined</b>, [[Reject]]: <b>undefined</b> }.</li>\n            <li>Let <i>executor</i> be a new built-in function object as defined in <a href=\"/sec/sec-getcapabilitiesexecutor-functions.html\">GetCapabilitiesExecutor Functions</a> (<a href=\"/sec/sec-getcapabilitiesexecutor-functions.html\">25.4.1.5.1</a>).</li>\n            <li>Set the [[Capability]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a> of\n                <i>executor</i> to <i>promiseCapability</i>.</li>\n            <li>Let <i>promise</i> be <a href=\"/sec/sec-construct.html\">Construct</a>(<i>C</i>, &#xAB;<i>executor</i>&#xBB;).</li>\n            <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>promise</i>).</li>\n            <li>If <a href=\"/sec/sec-iscallable.html\">IsCallable</a>(<i>promiseCapability</i>.[[Resolve]]) is <b>false</b>, throw a\n                <b>TypeError</b> exception.</li>\n            <li>If <a href=\"/sec/sec-iscallable.html\">IsCallable</a>(<i>promiseCapability</i>.[[Reject]]) is <b>false</b>, throw a\n                <b>TypeError</b> exception.</li>\n            <li>Set <i>promiseCapability</i>.[[Promise]] to <i>promise</i>.</li>\n            <li>Return <i>promiseCapability</i>.</li>\n          </ol>\n\n          <div class=\"note\">\n            <p><span class=\"nh\">NOTE</span> This abstract operation supports Promise subclassing, as it is generic on any\n            constructor that calls a passed executor function argument in the same way as the Promise constructor. It is used to\n            generalize static methods of the Promise constructor to any subclass.</p>\n          </div>\n        </div>\n\n        <section id=\"sec-getcapabilitiesexecutor-functions\">\n          <h1><span class=\"secnum\" id=\"sec-25.4.1.5.1\"><a href=\"/sec/sec-getcapabilitiesexecutor-functions.html\" title=\"link to this section\">25.4.1.5.1</a></span> GetCapabilitiesExecutor Functions</h1>\n\n          <p>A GetCapabilitiesExecutor function is an anonymous built-in function that has a [[Capability]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a>.</p>\n\n          <p class=\"normalbefore\">When a GetCapabilitiesExecutor function <var>F</var> is called with arguments <var>resolve</var>\n          and <var>reject</var> the following steps are taken:</p>\n\n          <ol class=\"proc\">\n            <li><a href=\"/sec/sec-algorithm-conventions.html\">Assert</a>: <i>F</i> has a [[Capability]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a> whose value is a PromiseCapability\n                Record.</li>\n            <li>Let <i>promiseCapability</i> be the value of <i>F</i>&apos;s [[Capability]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a>.</li>\n            <li>If <i>promiseCapability</i>.[[Resolve]] is not <b>undefined</b>, throw a <b>TypeError</b> exception.</li>\n            <li>If <i>promiseCapability</i>.[[Reject]] is not <b>undefined</b>, throw a <b>TypeError</b> exception.</li>\n            <li>Set <i>promiseCapability</i>.[[Resolve]] to <i>resolve</i>.</li>\n            <li>Set <i>promiseCapability</i>.[[Reject]] to <i>reject</i>.</li>\n            <li>Return <b>undefined</b>.</li>\n          </ol>\n\n          <p>The <code>length</code> property of a GetCapabilitiesExecutor function is <b>2</b>.</p>\n        </section>\n      "}