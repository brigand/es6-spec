{"id":"sec-promise-jobs","html":"\n      <div class=\"front\">\n        <h1><span class=\"secnum\" id=\"sec-25.4.2\"><a href=\"/sec/sec-promise-jobs.html\" title=\"link to this section\">25.4.2</a></span>\n            Promise Jobs</h1>\n      </div>\n\n      <section id=\"sec-promisereactionjob\">\n        <h1><span class=\"secnum\" id=\"sec-25.4.2.1\"><a href=\"/sec/sec-promisereactionjob.html\" title=\"link to this section\">25.4.2.1</a></span> PromiseReactionJob ( reaction, argument )</h1>\n\n        <p class=\"normalbefore\">The job PromiseReactionJob with parameters <var>reaction</var> and <var>argument</var> applies the\n        appropriate handler to the incoming value, and uses the handler&apos;s return value to resolve or reject the derived promise\n        associated with that handler.</p>\n\n        <ol class=\"proc\">\n          <li><a href=\"/sec/sec-algorithm-conventions.html\">Assert</a>: <i>reaction</i> is a PromiseReaction Record.</li>\n          <li>Let <i>promiseCapability</i> be <i>reaction</i>.[[Capabilities]].</li>\n          <li>Let <i>handler</i> be <i>reaction</i>.[[Handler]].</li>\n          <li>If <i>handler</i> is <code>&quot;Identity&quot;</code>, let <i>handlerResult</i> be <a href=\"/sec/sec-normalcompletion.html\">NormalCompletion</a>(<i>argument</i>).</li>\n          <li>Else if <i>handler</i> is <code>&quot;Thrower&quot;</code>, let <i>handlerResult</i> be <a href=\"/sec/sec-completion-record-specification-type.html\">Completion</a>{[[type]]: <span style=\"font-family:\n              sans-serif\">throw</span>, [[value]]: <i>argument</i>, [[target]]: <span style=\"font-family:\n              sans-serif\">empty</span>}.</li>\n          <li>Else, let <i>handlerResult</i> be <a href=\"/sec/sec-call.html\">Call</a>(<i>handler</i>, <b>undefined</b>,\n              &#xAB;<i>argument</i>&#xBB;).</li>\n          <li>If <i>handlerResult</i> is an <a href=\"/sec/sec-completion-record-specification-type.html\">abrupt completion</a>, then\n            <ol class=\"block\">\n              <li>Let <i>status</i> be <a href=\"/sec/sec-call.html\">Call</a>(<i>promiseCapability</i>.[[Reject]], <b>undefined</b>,\n                  &#xAB;<i>handlerResult</i>.[[value]]&#xBB;).</li>\n              <li>NextJob <a href=\"/sec/sec-completion-record-specification-type.html\">Completion</a>(<i>status</i>).</li>\n            </ol>\n          </li>\n          <li>Let <i>status</i> be <a href=\"/sec/sec-call.html\">Call</a>(<i>promiseCapability</i>.[[Resolve]], <b>undefined</b>,\n              &#xAB;<i>handlerResult</i>.[[value]]&#xBB;)<i>.</i></li>\n          <li>NextJob <a href=\"/sec/sec-completion-record-specification-type.html\">Completion</a>(<i>status</i>).</li>\n        </ol>\n      </section>\n\n      <section id=\"sec-promiseresolvethenablejob\">\n        <h1><span class=\"secnum\" id=\"sec-25.4.2.2\"><a href=\"/sec/sec-promiseresolvethenablejob.html\" title=\"link to this section\">25.4.2.2</a></span> PromiseResolveThenableJob ( promiseToResolve, thenable, then)</h1>\n\n        <p class=\"normalbefore\">The job PromiseResolveThenableJob with parameters <var>promiseToResolve</var>,\n        <var>thenable</var>, and <var>then</var> performs the following steps:</p>\n\n        <ol class=\"proc\">\n          <li>Let <i>resolvingFunctions</i> be <a href=\"/sec/sec-createresolvingfunctions.html\">CreateResolvingFunctions</a>(<i>promiseToResolve</i>).</li>\n          <li>Let <i>thenCallResult</i> be <a href=\"/sec/sec-call.html\">Call</a>(<i>then</i>, <i>thenable</i>,\n              &#xAB;<i>resolvingFunctions</i>.[[Resolve]], <i>resolvingFunctions</i>.[[Reject]]&#xBB;).</li>\n          <li>If <i>thenCallResult</i> is an <a href=\"/sec/sec-completion-record-specification-type.html\">abrupt completion</a>,\n            <ol class=\"block\">\n              <li>Let <i>status</i> be <a href=\"/sec/sec-call.html\">Call</a>(<i>resolvingFunctions</i>.[[Reject]], <b>undefined</b>,\n                  &#xAB;<i>thenCallResult</i>.[[value]]&#xBB;)<i>.</i></li>\n              <li>NextJob <a href=\"/sec/sec-completion-record-specification-type.html\">Completion</a>(<i>status</i>)<i>.</i></li>\n            </ol>\n          </li>\n          <li>NextJob <a href=\"/sec/sec-completion-record-specification-type.html\">Completion</a>(<i>thenCallResult</i>).</li>\n        </ol>\n\n        <div class=\"note\">\n          <p><span class=\"nh\">NOTE</span> This Job uses the supplied thenable and its <code>then</code> method to resolve the\n          given promise. This process must take place as a Job to ensure that the evaluation of the <code>then</code> method\n          occurs after evaluation of any surrounding code has completed.</p>\n        </div>\n      </section>\n    "}