{"id":"sec-regexpinitialize","html":"\n          <h1><span class=\"secnum\" id=\"sec-21.2.3.2.2\"><a href=\"/sec/sec-regexpinitialize.html\" title=\"link to this section\">21.2.3.2.2</a></span> Runtime Semantics: RegExpInitialize ( obj, pattern, flags )</h1>\n\n          <p class=\"normalbefore\">When the abstract operation RegExpInitialize with arguments <i><span style=\"font-family: Times\n          New Roman\">obj</span>,</i> <var>pattern</var>, and <var>flags</var> is called, the following steps are taken:</p>\n\n          <ol class=\"proc\">\n            <li>If <i>pattern</i> is <b>undefined</b>, let <i>P</i> be the empty String.</li>\n            <li>Else, let <i>P</i> be <a href=\"/sec/sec-tostring.html\">ToString</a>(<i>pattern</i>).</li>\n            <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>P</i>).</li>\n            <li>If <i>flags</i> is <b>undefined</b>, let <i>F</i> be the empty String.</li>\n            <li>Else, let <i>F</i> be <a href=\"/sec/sec-tostring.html\">ToString</a>(<i>flags</i>).</li>\n            <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>F</i>).</li>\n            <li>If <i>F</i> contains any code unit other than <code>&quot;g&quot;</code>, <code>&quot;i&quot;</code>, <code>&quot;m&quot;</code>,\n                <code>&quot;u&quot;</code>, or <code>&quot;y&quot;</code> or if it contains the same code unit more than once, throw a\n                <b>SyntaxError</b> exception.</li>\n            <li>If <i>F</i> contains <code>&quot;u&quot;</code>, let <i>BMP</i> be <b>false</b>; else let <i>BMP</i> be <b>true</b>.</li>\n            <li>If <i>BMP</i> is <b>true</b>, then\n              <ol class=\"block\">\n                <li>Parse <i>P</i> using the grammars in <a href=\"/sec/sec-patterns.html\">21.2.1</a> and interpreting each of its 16-bit\n                    elements as a Unicode BMP code point. UTF-16 decoding is not applied to the elements. The goal symbol for the\n                    parse is <i>Pattern</i>. Throw a <b>SyntaxError</b> exception if <i>P</i> did not conform to the grammar, if\n                    any elements of <i>P</i> were not matched by the parse, or if any Early Error conditions exist.</li>\n                <li>Let <i>patternCharacters</i>  be a <a href=\"/sec/sec-list-and-record-specification-type.html\">List</a> whose elements\n                    are the code unit elements of <i>P.</i></li>\n              </ol>\n            </li>\n            <li>Else\n              <ol class=\"block\">\n                <li>Parse <i>P</i> using the grammars in <a href=\"/sec/sec-patterns.html\">21.2.1</a> and interpreting  <i>P</i> as UTF-16\n                    encoded Unicode code points (<a href=\"/sec/sec-ecmascript-language-types-string-type.html\">6.1.4</a>). The goal symbol\n                    for the parse is <i>Pattern</i><sub>[U]</sub>. Throw a <b>SyntaxError</b> exception if <i>P</i> did not\n                    conform to the grammar, if any elements of <i>P</i> were not matched by the parse, or if any Early Error\n                    conditions exist.</li>\n                <li>Let <i>patternCharacters</i>  be a <a href=\"/sec/sec-list-and-record-specification-type.html\">List</a> whose elements\n                    are the code points resulting from applying UTF-16 decoding to <i>P</i>&#x2019;s sequence of elements.</li>\n              </ol>\n            </li>\n            <li>Set the value of <i>obj&#x2019;s</i> [[OriginalSource]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a> to <i>P</i>.</li>\n            <li>Set the value of <i>obj&#x2019;s</i> [[OriginalFlags]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a> to <i>F</i>.</li>\n            <li>Set <i>obj&#x2019;s</i> [[RegExpMatcher]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal\n                slot</a> to the internal procedure that evaluates the above parse of <i>P</i> by applying the semantics provided\n                in <a href=\"/sec/sec-pattern-semantics.html\">21.2.2</a> using <i>patternCharacters</i> as the pattern&#x2019;s <a href=\"/sec/sec-list-and-record-specification-type.html\">List</a> of <i>SourceCharacter</i> values and <i>F</i> as the flag\n                parameters.</li>\n            <li>Let <i>setStatus</i> be <a href=\"/sec/sec-set-o-p-v-throw.html\">Set</a>(<i>obj</i>, <code>&quot;lastIndex&quot;</code>, 0,\n                <b>true</b>).</li>\n            <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>setStatus</i>).</li>\n            <li>Return <i>obj</i>.</li>\n          </ol>\n        "}