{"id":"sec-weakset-objects","html":"\n    <div class=\"front\">\n      <h1><span class=\"secnum\" id=\"sec-23.4\"><a href=\"/sec/sec-weakset-objects.html\" title=\"link to this section\">23.4</a></span> WeakSet\n          Objects</h1>\n\n      <p>WeakSet objects are collections of objects. A distinct object may only occur once as an element of a WeakSet&#x2019;s\n      collection. A WeakSet may be queried to see if it contains a specific object, but no mechanism is provided for enumerating\n      the objects it holds. If an object that is contained by a WeakSet is only reachable by following a chain of references that\n      start within that WeakSet, then that object is inaccessible and is automatically removed from the WeakSet. WeakSet\n      implementations must detect and remove such objects and any associated resources.</p>\n\n      <p>An implementation may impose an arbitrarily determined latency between the time an object contained in a WeakSet becomes\n      inaccessible and the time when the object is removed from the WeakSet. If this latency was observable to ECMAScript program,\n      it would be a source of indeterminacy that could impact program execution. For that reason, an ECMAScript implementation\n      must not provide any means to determine if a WeakSet contains a particular object that does not require the observer to\n      present the observed object.</p>\n\n      <p>WeakSet objects must be implemented using either hash tables or other mechanisms that, on average, provide access times\n      that are sublinear on the number of elements in the collection. The data structure used in this WeakSet objects\n      specification is only intended to describe the required observable semantics of WeakSet objects. It is not intended to be a\n      viable implementation model.</p>\n\n      <div class=\"note\">\n        <p><span class=\"nh\">NOTE</span> See the NOTE in <a href=\"/sec/sec-weakmap-objects.html\">23.3</a>.</p>\n      </div>\n    </div>\n\n    <section id=\"sec-weakset-constructor\">\n      <div class=\"front\">\n        <h1><span class=\"secnum\" id=\"sec-23.4.1\"><a href=\"/sec/sec-weakset-constructor.html\" title=\"link to this section\">23.4.1</a></span>\n            The WeakSet Constructor</h1>\n\n        <p>The WeakSet constructor is the %WeakSet% intrinsic object and the initial value of the <code>WeakSet</code> property of\n        the global object. When called as a constructor it creates and initializes a new WeakSet object. <code>WeakSet</code> is\n        not intended to be called as a function and will throw an exception when called in that manner.</p>\n\n        <p>The <code>WeakSet</code> constructor is designed to be subclassable. It may be used as the value in an\n        <code>extends</code> clause of a class definition. Subclass constructors that intend to inherit the specified\n        <code>WeakSet</code> behaviour must include a <code>super</code> call to the <code>WeakSet</code> constructor to create\n        and initialize the subclass instance with the internal state necessary to support the <code><a href=\"/sec/sec-weakset.prototype.html\">WeakSet.prototype</a></code> built-in methods.</p>\n      </div>\n\n      <section id=\"sec-weakset-iterable\">\n        <h1><span class=\"secnum\" id=\"sec-23.4.1.1\"><a href=\"/sec/sec-weakset-iterable.html\" title=\"link to this section\">23.4.1.1</a></span> WeakSet ( [ iterable ] )</h1>\n\n        <p class=\"normalbefore\">When the <code>WeakSet</code> function is called with optional argument <var>iterable</var> the\n        following steps are taken:</p>\n\n        <ol class=\"proc\">\n          <li>If NewTarget is <b>undefined</b>, throw a <b>TypeError</b> exception.</li>\n          <li>Let <i>set</i> be <a href=\"/sec/sec-ordinarycreatefromconstructor.html\">OrdinaryCreateFromConstructor</a>(NewTarget,\n              <code>&quot;%WeakSetPrototype%&quot;</code>, &#xAB;&#x200D;[[WeakSetData]]&#xBB; ).</li>\n          <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>set</i>).</li>\n          <li>Set <i>set&#x2019;s</i> [[WeakSetData]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a>\n              to a new empty <a href=\"/sec/sec-list-and-record-specification-type.html\">List</a>.</li>\n          <li>If <i>iterable</i> is not present, let <i>iterable</i> be <b>undefined</b>.</li>\n          <li>If <i>iterable</i> is either <b>undefined</b> or <b>null</b>, let <i>iter</i> be <b>undefined</b>.</li>\n          <li>Else,\n            <ol class=\"block\">\n              <li>Let <i>adder</i> be <a href=\"/sec/sec-get-o-p.html\">Get</a>(<i>set</i>, <code>&quot;add&quot;</code>)<b>.</b></li>\n              <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>adder</i>).</li>\n              <li>If <a href=\"/sec/sec-iscallable.html\">IsCallable</a>(<i>adder</i>) is <b>false</b>, throw a <b>TypeError</b>\n                  exception.</li>\n              <li>Let <i>iter</i> be <a href=\"/sec/sec-getiterator.html\">GetIterator</a>(<i>iterable</i>).</li>\n              <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>iter</i>).</li>\n            </ol>\n          </li>\n          <li>If <i>iter</i> is <b>undefined</b>, return <i>set</i>.</li>\n          <li>Repeat\n            <ol class=\"block\">\n              <li>Let <i>next</i> be <a href=\"/sec/sec-iteratorstep.html\">IteratorStep</a>(<i>iter</i>).</li>\n              <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>next</i>).</li>\n              <li>If <i>next</i> is <b>false</b>, return <i>set</i>.</li>\n              <li>Let <i>nextValue</i> be <a href=\"/sec/sec-iteratorvalue.html\">IteratorValue</a>(<i>next</i>).</li>\n              <li><a href=\"/sec/sec-returnifabrupt.html\">ReturnIfAbrupt</a>(<i>nextValue</i>).</li>\n              <li>Let <i>status</i> be <a href=\"/sec/sec-call.html\">Call</a>(<i>adder</i>, <i>set</i>, &#xAB;<i>nextValue</i>\n                  &#xBB;).</li>\n              <li>If <i>status</i> is an <a href=\"/sec/sec-completion-record-specification-type.html\">abrupt completion</a>, return <a href=\"/sec/sec-iteratorclose.html\">IteratorClose</a>(<i>iter</i>, <i>status</i>).</li>\n            </ol>\n          </li>\n        </ol>\n      </section>\n    </section>\n\n    <section id=\"sec-properties-of-the-weakset-constructor\">\n      <div class=\"front\">\n        <h1><span class=\"secnum\" id=\"sec-23.4.2\"><a href=\"/sec/sec-properties-of-the-weakset-constructor.html\" title=\"link to this section\">23.4.2</a></span> Properties of the WeakSet Constructor</h1>\n\n        <p>The value of the [[Prototype]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a> of the\n        WeakSet constructor is the intrinsic object %FunctionPrototype% (<a href=\"/sec/sec-properties-of-the-function-prototype-object.html\">19.2.3</a>).</p>\n\n        <p>Besides the <code>length</code> property (whose value is <b>0</b>), the WeakSet constructor has the following\n        properties:</p>\n      </div>\n\n      <section id=\"sec-weakset.prototype\">\n        <h1><span class=\"secnum\" id=\"sec-23.4.2.1\"><a href=\"/sec/sec-weakset.prototype.html\" title=\"link to this section\">23.4.2.1</a></span> WeakSet.prototype</h1>\n\n        <p>The initial value of <code>WeakSet.prototype</code> is the intrinsic %WeakSetPrototype% object (<a href=\"/sec/sec-properties-of-the-weakset-prototype-object.html\">23.4.3</a>).</p>\n\n        <p>This property has the attributes { [[Writable]]: <b>false</b>, [[Enumerable]]: <b>false</b>, [[Configurable]]:\n        <b>false</b> }.</p>\n      </section>\n    </section>\n\n    <section id=\"sec-properties-of-the-weakset-prototype-object\">\n      <div class=\"front\">\n        <h1><span class=\"secnum\" id=\"sec-23.4.3\"><a href=\"/sec/sec-properties-of-the-weakset-prototype-object.html\" title=\"link to this section\">23.4.3</a></span> Properties of the WeakSet Prototype Object</h1>\n\n        <p>The WeakSet prototype object is the intrinsic object %WeakSetPrototype%. The value of the [[Prototype]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a> of the WeakSet prototype object is the intrinsic\n        object %ObjectPrototype% (<a href=\"/sec/sec-properties-of-the-object-prototype-object.html\">19.1.3</a>). The WeakSet prototype\n        object is an ordinary object. It does not have a [[WeakSetData]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a>.</p>\n      </div>\n\n      <section id=\"sec-weakset.prototype.add\">\n        <h1><span class=\"secnum\" id=\"sec-23.4.3.1\"><a href=\"/sec/sec-weakset.prototype.add.html\" title=\"link to this section\">23.4.3.1</a></span> WeakSet.prototype.add ( value )</h1>\n\n        <p class=\"normalbefore\">The following steps are taken:</p>\n\n        <ol class=\"proc\">\n          <li>Let <i>S</i> be the <b>this</b> value.</li>\n          <li>If <a href=\"/sec/sec-ecmascript-data-types-and-values.html\">Type</a>(<i>S</i>) is not Object, throw a <b>TypeError</b>\n              exception.</li>\n          <li>If <i>S</i> does not have a [[WeakSetData]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal\n              slot</a>, throw a <b>TypeError</b> exception.</li>\n          <li>If <a href=\"/sec/sec-ecmascript-data-types-and-values.html\">Type</a>(<i>value</i>) is not Object, throw a <b>TypeError</b>\n              exception.</li>\n          <li>Let <i>entries</i> be the <a href=\"/sec/sec-list-and-record-specification-type.html\">List</a> that is the value of\n              <i>S</i>&#x2019;s [[WeakSetData]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a>.</li>\n          <li>Repeat for each <i>e</i> that is an element of <i>entries,</i>\n            <ol class=\"block\">\n              <li>If <i>e</i> is not <span style=\"font-family: sans-serif\">empty</span> and <a href=\"/sec/sec-samevalue.html\">SameValue</a>(<i>e</i>, <i>value</i>) is <b>true</b>, then\n                <ol class=\"block\">\n                  <li>Return <i>S</i>.</li>\n                </ol>\n              </li>\n            </ol>\n          </li>\n          <li>Append <i>value</i> as the last element of <i>entries</i>.</li>\n          <li>Return <i>S</i>.</li>\n        </ol>\n      </section>\n\n      <section id=\"sec-weakset.prototype.constructor\">\n        <h1><span class=\"secnum\" id=\"sec-23.4.3.2\"><a href=\"/sec/sec-weakset.prototype.constructor.html\" title=\"link to this section\">23.4.3.2</a></span> WeakSet.prototype.constructor</h1>\n\n        <p>The initial value of <code>WeakSet.prototype.constructor</code> is the %WeakSet% intrinsic object.</p>\n      </section>\n\n      <section id=\"sec-weakset.prototype.delete\">\n        <h1><span class=\"secnum\" id=\"sec-23.4.3.3\"><a href=\"/sec/sec-weakset.prototype.delete.html\" title=\"link to this section\">23.4.3.3</a></span> WeakSet.prototype.delete ( value )</h1>\n\n        <p class=\"normalbefore\">The following steps are taken:</p>\n\n        <ol class=\"proc\">\n          <li>Let <i>S</i> be the <b>this</b> value.</li>\n          <li>If <a href=\"/sec/sec-ecmascript-data-types-and-values.html\">Type</a>(<i>S</i>) is not Object, throw a <b>TypeError</b>\n              exception.</li>\n          <li>If <i>S</i> does not have a [[WeakSetData]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal\n              slot</a>, throw a <b>TypeError</b> exception.</li>\n          <li>If <a href=\"/sec/sec-ecmascript-data-types-and-values.html\">Type</a>(<i>value</i>) is not Object, return <b>false</b>.</li>\n          <li>Let <i>entries</i> be the <a href=\"/sec/sec-list-and-record-specification-type.html\">List</a> that is the value of\n              <i>S</i>&#x2019;s [[WeakSetData]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a>.</li>\n          <li>Repeat for each  <i>e</i> that is an element of <i>entries</i>,\n            <ol class=\"block\">\n              <li>If <i>e</i> is not <span style=\"font-family: sans-serif\">empty</span> and <a href=\"/sec/sec-samevalue.html\">SameValue</a>(<i>e</i>, <i>value</i>) is <b>true</b>, then\n                <ol class=\"block\">\n                  <li>Replace the element of <i>entries</i> whose value is <i>e</i> with an element whose value is <span style=\"font-family: sans-serif\">empty</span><i>.</i></li>\n                  <li>Return <b>true</b>.</li>\n                </ol>\n              </li>\n            </ol>\n          </li>\n          <li>Return <b>false</b>.</li>\n        </ol>\n\n        <div class=\"note\">\n          <p><span class=\"nh\">NOTE</span> The value <b>empty</b> is used as a specification device to indicate that an entry has\n          been deleted. Actual implementations may take other actions such as physically removing the entry from internal data\n          structures.</p>\n        </div>\n      </section>\n\n      <section id=\"sec-weakset.prototype.has\">\n        <h1><span class=\"secnum\" id=\"sec-23.4.3.4\"><a href=\"/sec/sec-weakset.prototype.has.html\" title=\"link to this section\">23.4.3.4</a></span> WeakSet.prototype.has ( value )</h1>\n\n        <p class=\"normalbefore\">The following steps are taken:</p>\n\n        <ol class=\"proc\">\n          <li>Let <i>S</i> be the <b>this</b> value.</li>\n          <li>If <a href=\"/sec/sec-ecmascript-data-types-and-values.html\">Type</a>(<i>S</i>) is not Object, throw a <b>TypeError</b>\n              exception.</li>\n          <li>If <i>S</i> does not have a [[WeakSetData]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal\n              slot</a>, throw a <b>TypeError</b> exception.</li>\n          <li>Let <i>entries</i> be the <a href=\"/sec/sec-list-and-record-specification-type.html\">List</a> that is the value of\n              <i>S</i>&#x2019;s [[WeakSetData]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a>.</li>\n          <li>If <a href=\"/sec/sec-ecmascript-data-types-and-values.html\">Type</a>(<i>value</i>) is not Object, return <b>false.</b></li>\n          <li>Repeat for each <i>e</i> that is an element of <i>entries,</i>\n            <ol class=\"block\">\n              <li>If <i>e</i> is not <span style=\"font-family: sans-serif\">empty</span> and <a href=\"/sec/sec-samevalue.html\">SameValue</a>(<i>e</i>, <i>value</i>) is <b>true</b>, return <b>true</b><i>.</i></li>\n            </ol>\n          </li>\n          <li>Return <b>false</b>.</li>\n        </ol>\n      </section>\n\n      <section id=\"sec-weakset.prototype-@@tostringtag\">\n        <h1><span class=\"secnum\" id=\"sec-23.4.3.5\"><a href=\"/sec/sec-weakset.prototype-@@tostringtag.html\" title=\"link to this section\">23.4.3.5</a></span> WeakSet.prototype [ @@toStringTag ]</h1>\n\n        <p>The initial value of the @@toStringTag property is the String value <code>&quot;WeakSet&quot;</code>.</p>\n\n        <p>This property has the attributes { [[Writable]]: <span class=\"value\">false</span>, [[Enumerable]]: <span class=\"value\">false</span>, [[Configurable]]: <span class=\"value\">true</span> }.</p>\n      </section>\n    </section>\n\n    <section id=\"sec-properties-of-weakset-instances\">\n      <h1><span class=\"secnum\" id=\"sec-23.4.4\"><a href=\"/sec/sec-properties-of-weakset-instances.html\" title=\"link to this section\">23.4.4</a></span> Properties of WeakSet Instances</h1>\n\n      <p>WeakSet instances are ordinary objects that inherit properties from the WeakSet prototype. WeakSet instances also have a\n      [[WeakSetData]] <a href=\"/sec/sec-object-internal-methods-and-internal-slots.html\">internal slot</a>.</p>\n    </section>\n  "}